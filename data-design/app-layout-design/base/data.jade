+component('assignment')
  +list(['题目', '要求', '截止时间', '老师'])

  +detail()
    +fieldset('作业要求')
      +row()
        +no-blank-text('题目')(span=HALF_ROW, title='世上无难事，只要肯攀登')
        +datetime('截止时间')
        +multi-ahead('学生')(candidates=['沈少伟', '陈伟津', '陈杰文', '林臻南', '曾灏'])
      +row()
        +html('要求')(span=FULL_ROW)
    +auto-insert-current-user-as('老师')

+component('homework')
  +list(['学生', '内容', '分数'])

  +detail()
    +fieldset('作业内容')
      +html('内容')(span=FULL_ROW, placeholder='在这里开始作业吧~')

    +auto-insert-current-user-as('学生')

+namespace('aw')
  +relation('assignment', '1 -> *', 'homework')(cause='assigment')

  +extend-component('assignment')
    +extend-list()
      //- 当relation有casue属性时，自动完成下面的步骤，而无需手动写出
      +add-link-go-create-or-update-relation-data('homework', '开始写作业', '更新作业')
      //- +add-item-link({label: '开始写作业', path: 'create-homework', to: 'homework.detail.create', guard: '!homework._id', icon: 'go-create'})

    +extend-detail()
      +append()
        +include()(docName='homework', namespace='default', view='list', filterQuery='homework.assignmentId == doc._id')
      //- +insert-row
      //- +insert-fieldset()(after='作业要求')


  +extend-component('homework')
    +extend-list(['assignment.题目', 'assignment.截止时间', '学生', '内容', '分数'])
      //- 当relation有casue属性，且本doc不是cause（也就是是result时），自动完成下面的步骤，取得go-create的按钮
      +remove-link('go-create')
      //- 还可以个性化的自行添加必要的链接
      +add-list-link({label: '看作业要求列表', path: 'go-assignment-list', to: 'assignment.list.list', guard: true, icon: 'go'})

    +extend-detail()
      +insert-fieldset('作业要求')(before='作业内容')
        +row()
          +ref-text('assignment.题目')(span=HALF_ROW)
          +ref-text('assignment.截止时间')(span=HALF_ROW)


    //- +auto-insert('assignmentId', A.docId('assignment')) 这个将从relation推断后，自动添加