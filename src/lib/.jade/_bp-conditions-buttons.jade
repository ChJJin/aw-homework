mixin _if-action(action)
  | {{#if bp-action-is '#{action}'}}
  block
  | {{/if}}

mixin _if-collection-permit(action)
  | {{#if bp-collection-permit '#{action}'}}
  block
  | {{/if}}

mixin _if-doc-permit(action)
  | {{#if bp-doc-permit this '#{action}'}}
  block
  | {{/if}}

mixin _if-attribute-permit(attr, action)
  | {{#if bp-attribute-permit this '#{attr}' #{action}}}
  block
  | {{/if}}

mixin _if-else-attribute-permit(attr, action)
  | {{#if bp-attribute-permit this '#{attr}' #{action}}}
  block

mixin _else()
  | {{else}}
  block
  | {{/if}}

//- button和link-button的本质区别在于，link本质是导航，不对数据进行任何操作，button是操作，操作后依据结果导航
mixin _guarded-button(action, label)
  +_if-action(action)
    +_if-collection-permit(action)
      a(href='#', class='bp-#{action}') #{label}


mixin _link-button(action)
  a(href="{{bp-path-for '#{action}' this}}", class='bp-#{action}')
    case action
      when 'create': i.fa.fa-plus.fa-fw 
      when 'update': i.fa.fa-pencil.fa-fw 
      when 'delete': i.fa.fa-trash-o.fa-fw 
      defaule: i

mixin _guarded-link(action)
  +_if-collection-permit(action)
    +_link-button(routeName, action)
